#include "Renderer/Text.h"
#include "Common/Vertex.h"

using namespace Renderer;

static const char *nulpixelbitmap =
    "        "
    "        "
    "        "
    "        "
    "        "
    "        "
    "        "
    "        ";

static const char *blockpixelbitmap =
"11111111"
"11111111"
"11111111"
"11111111"
"11111111"
"11111111"
"11111111"
"11111111";


static const char *pixelbitmaps[] = {
// (0)
"        "
"        "
"        "
"        "
"        "
"        "
"        "
"        ",

// (1)
"   11   "
"  1111  "
" 11  11 "
"11    11"
"111  111"
"  1  1  "
"  1  1  "
"  1111  ",

// (2)
"  1111  "
"  1  1  "
"  1  1  "
"111  111"
"11    11"
" 11  11 "
"  1111  "
"   11   ",

// (3)
"   11   "
"   111  "
"1111 11 "
"1     11"
"1     11"
"1111 11 "
"   111  "
"   11   ",

// (4)
"   11   "
"  111   "
" 11 1111"
"11     1"
"11     1"
" 11 1111"
"  111   "
"   11   ",

// (5)
"  1111  "
"1  11  1"
"11    11"
"111  111"
"11    11"
"1  11  1"
"  1111  "
"        ",

// (6)
"11111111"
"11111111"
"1111111 "
"111111  "
"11111  1"
"1111  11"
"111  111"
"        ",

// (7)
"111  111"
"11    11"
"1  11  1"
"  1111  "
"1  11  1"
"11    11"
"111  111"
"        ",

// (8)
"       1"
"      11"
"     11 "
"1   11  "
"11 11   "
" 111    "
"  1     "
"        ",

// (9)
" 111111 "
"11    11"
"11 1  11"
"11 1  11"
"11 11 11"
"11    11"
"11    11"
" 111111 ",

// (10)
"   11   "
"  1111  "
"  1111  "
"  1111  "
" 111111 "
"   1    "
"  111   "
"   1    ",

// (11)
"   11   "
"   111  "
"   1 11 "
"   1    "
"   1    "
" 111    "
"1111    "
" 11     ",

// (12)
"1111    "
"11      "
"1111111 "
"11 11   "
"11 1111 "
"   11   "
"   11   "
"        ",

// (13)
"1111    "
"11      "
"11 11111"
"11 11 11"
"11111111"
"   1111 "
"   11 11"
"        ",

// (14)
"    1   "
"   11   "
"  111   "
" 1111   "
"  111   "
"   11   "
"    1   "
"        ",

// (15)
"   1    "
"   11   "
"   111  "
"   1111 "
"   111  "
"   11   "
"   1    "
"        ",

// (16)
" 11111  "
"11   11 "
"11   11 "
"        "
"11   11 "
"11   11 "
" 11111  "
"        ",

// (17)
"     11 "
"     11 "
"     11 "
"        "
"     11 "
"     11 "
"     11 "
"        ",

// (18)
" 11111  "
"     11 "
"     11 "
" 11111  "
"11      "
"11      "
" 11111  "
"        ",

// (19)
" 11111  "
"     11 "
"     11 "
" 11111  "
"     11 "
"     11 "
" 11111  "
"        ",

// (20)
"11   11 "
"11   11 "
"11   11 "
" 11111  "
"     11 "
"     11 "
"     11 "
"        ",

// (21)
" 11111  "
"11      "
"11      "
" 11111  "
"     11 "
"     11 "
" 11111  "
"        ",

// (22)
" 11111  "
"11      "
"11      "
" 11111  "
"11   11 "
"11   11 "
" 11111  "
"        ",

// (23)
" 11111  "
"     11 "
"     11 "
"        "
"     11 "
"     11 "
"     11 "
"        ",

// (24)
" 11111  "
"11   11 "
"11   11 "
" 11111  "
"11   11 "
"11   11 "
" 11111  "
"        ",

// (25)
" 11111  "
"11   11 "
"11   11 "
" 11111  "
"     11 "
"     11 "
" 11111  "
"        ",

// (26)
"        "
"        "
"  1111  "
"     11 "
" 111111 "
" 11  11 "
"  1111  "
"        ",

// (27)
" 1111   "
" 11     "
" 1111   "
" 11     "
" 111111 "
"   11   "
"   1111 "
"        ",

// (28)
"        "
"  11 11 "
" 1111111"
" 1111111"
"  11111 "
"   111  "
"    1   "
"        ",


// (29)
"        "
"   111  "
"   111  "
" 111 111"
" 111 111"
"    1   "
"   111  "
"        ",


// (30)
"        "
"   11   "
"  1111  "
" 111111 "
" 111111 "
"  1111  "
"   11   "
"        ",


// (31)
"        "
"   11   "
"  1111  "
" 111111 "
" 111111 "
"   11   "
"  1111  "
"        ",

//  
"        "
"        "
"        "
"        "
"        "
"        "
"        "
"        ",

// !
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"        "
"   11   "
"        ",

// "
" 11  11 "
" 11  11 "
" 11  11 "
"        "
"        "
"        "
"        "
"        ",

// #
"        "
" 11 11  "
"1111111 "
" 11 11  "
" 11 11  "
"1111111 "
" 11 11  "
"        ",

// $
"   11   "
"  11111 "
" 11     "
"  1111  "
"     11 "
" 11111  "
"   11   "
"        ",

// %
"        "
" 11  11 "
" 11 11  "
"   11   "
"  11    "
" 11  11 "
" 1   11 "
"        ",

// &
"  111   "
" 11 11  "
"  111   "
" 111    "
"11 1111 "
"11  11  "
" 111 11 "
"        ",

// '
"   11   "
"   11   "
"   11   "
"        "
"        "
"        "
"        "
"        ",

// (
"    111 "
"   111  "
"   11   "
"   11   "
"   11   "
"   111  "
"    111 "
"        ",

// )
" 111    "
"  111   "
"   11   "
"   11   "
"   11   "
"  111   "
" 111    "
"        ",

// *
"        "
" 11  11 "
"  1111  "
"11111111"
"  1111  "
" 11  11 "
"        "
"        ",

// +
"        "
"   11   "
"   11   "
" 111111 "
"   11   "
"   11   "
"        "
"        ",

// ,
"        "
"        "
"        "
"        "
"        "
"  11    "
"  11    "
" 11     ",

// -
"        "
"        "
"        "
" 111111 "
"        "
"        "
"        "
"        ",

// .
"        "
"        "
"        "
"        "
"        "
"   11   "
"   11   "
"        ",

// /
"      1 "
"     11 "
"    11  "
"   11   "
"  11    "
" 11     "
" 1      "
"        ",

// 0
"  1111  "
" 11  11 "
" 11 111 "
" 111 11 "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// 1
"   11   "
"  111   "
"   11   "
"   11   "
"   11   "
"   11   "
" 111111 "
"        ",

// 2
"  1111  "
" 11  11 "
"     11 "
"    11  "
"   11   "
"  11    "
" 111111 "
"        ",

// 3
" 111111 "
"    11  "
"   11   "
"    11  "
"     11 "
" 11  11 "
"  1111  "
"        ",

// 4
"    11  "
"   111  "
"  1111  "
" 11 11  "
" 111111 "
"    11  "
"    11  "
"        ",

// 5
" 111111 "
" 11     "
" 11111  "
"     11 "
"     11 "
" 11  11 "
"  1111  "
"        ",

// 6
"  1111  "
" 11     "
" 11     "
" 11111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// 7
" 111111 "
"     11 "
"    11  "
"   11   "
"  11    "
"  11    "
"  11    "
"        ",

// 8
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// 9
"  1111  "
" 11  11 "
" 11  11 "
"  11111 "
"     11 "
"    11  "
"  111   "
"        ",

// :
"        "
"   11   "
"   11   "
"        "
"   11   "
"   11   "
"        "
"        ",

// ;
"        "
"   11   "
"   11   "
"        "
"   11   "
"   11   "
"  11    "
"        ",

// <
"     11 "
"    11  "
"   11   "
"  11    "
"   11   "
"    11  "
"     11 "
"        ",

// =
"        "
"        "
" 111111 "
"        "
"        "
" 111111 "
"        "
"        ",

// >
" 11     "
"  11    "
"   11   "
"    11  "
"   11   "
"  11    "
" 11     "
"        ",

// ?
"  1111  "
" 11  11 "
"     11 "
"    11  "
"   11   "
"        "
"   11   "
"        ",

// @
"  1111  "
" 11  11 "
" 11 111 "
" 11 1 1 "
" 11 111 "
" 11     "
"  11111 "
"        ",

// A
"   11   "
"  1111  "
" 11  11 "
" 11  11 "
" 111111 "
" 11  11 "
" 11  11 "
"        ",

// B
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
"        ",

// C
"  1111  "
" 11  11 "
" 11     "
" 11     "
" 11     "
" 11  11 "
"  1111  "
"        ",

// D
" 1111   "
" 11 11  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11 11  "
" 1111   "
"        ",

// E
" 111111 "
" 11     "
" 11     "
" 11111  "
" 11     "
" 11     "
" 111111 "
"        ",

// F
" 111111 "
" 11     "
" 11     "
" 11111  "
" 11     "
" 11     "
" 11     "
"        ",

// G
"  11111 "
" 11     "
" 11     "
" 11 111 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// H
" 11  11 "
" 11  11 "
" 11  11 "
" 111111 "
" 11  11 "
" 11  11 "
" 11  11 "
"        ",

// I
"  1111  "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"  1111  "
"        ",

// J
"     11 "
"     11 "
"     11 "
"     11 "
"     11 "
" 11  11 "
"  1111  "
"        ",

// K
" 11  11 "
" 11 11  "
" 1111   "
" 111    "
" 1111   "
" 11 11  "
" 11  11 "
"        ",

// L
" 11     "
" 11     "
" 11     "
" 11     "
" 11     "
" 11     "
" 111111 "
"        ",

// M
"11   11 "
"111 111 "
"1111111 "
"11 1 11 "
"11   11 "
"11   11 "
"11   11 "
"        ",

// N
" 11  11 "
" 111 11 "
" 111111 "
" 111111 "
" 11 111 "
" 11  11 "
" 11  11 "
"        ",

// O
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// P
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
" 11     "
" 11     "
" 11     "
"        ",

// Q
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 111 11 "
" 11 11  "
"  11 11 "
"        ",

// R
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
" 11 11  "
" 11  11 "
" 11  11 "
"        ",

// S
"  1111  "
" 11  11 "
" 11     "
"  1111  "
"     11 "
" 11  11 "
"  1111  "
"        ",

// T
" 111111 "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"        ",

// U
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// V
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"        ",

// W
"11   11 "
"11   11 "
"11   11 "
"11 1 11 "
"1111111 "
"111 111 "
"11   11 "
"        ",

// X
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"  1111  "
" 11  11 "
" 11  11 "
"        ",

// Y
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"   11   "
"   11   "
"        ",

// Z
" 111111 "
"     11 "
"    11  "
"   11   "
"  11    "
" 11     "
" 111111 "
"        ",

// [
"   1111 "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"   1111 "
"        ",

// '\'
" 1      "
" 11     "
"  11    "
"   11   "
"    11  "
"     11 "
"      1 "
"        ",

// ]
" 1111   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
" 1111   "
"        ",

// ^
"   1    "
"  111   "
" 11 11  "
"11   11 "
"        "
"        "
"        "
"        ",

// _
"        "
"        "
"        "
"        "
"        "
"        "
"1111111 "
"        ",

// `
"        "
"11      "
" 11     "
"  11    "
"        "
"        "
"        "
"        ",

// a
"        "
"        "
"  1111  "
"     11 "
"  11111 "
" 11  11 "
"  11111 "
"        ",

// b
" 11     "
" 11     "
" 11111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11111  "
"        ",

// c
"        "
"        "
"  1111  "
" 11     "
" 11     "
" 11     "
"  1111  "
"        ",

// d
"     11 "
"     11 "
"  11111 "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// e
"        "
"        "
"  1111  "
" 11  11 "
" 111111 "
" 11     "
"  1111  "
"        ",

// f
"   111  "
"  11    "
" 11111  "
"  11    "
"  11    "
"  11    "
"  11    "
"        ",

// g
"        "
"        "
"  11111 "
" 11  11 "
" 11  11 "
"  11111 "
"     11 "
" 11111  ",

// h
" 11     "
" 11     "
" 11111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"        ",

// i
"   11   "
"        "
"  111   "
"   11   "
"   11   "
"   11   "
"  1111  "
"        ",

// j
"   11   "
"        "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
" 111    ",

// k
" 11     "
" 11     "
" 11  11 "
" 11 11  "
" 1111   "
" 11 11  "
" 11  11 "
"        ",

// l
"  111   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"  1111  "
"        ",

// m
"        "
"        "
"111 11  "
"1111111 "
"11 1 11 "
"11   11 "
"11   11 "
"        ",

// n
"        "
"        "
" 11111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"        ",

// o
"        "
"        "
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// p
"        "
"        "
" 11111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11111  "
" 11     ",

// q
"        "
"        "
"  11111 "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"     11 ",

// r
"        "
"        "
" 11111  "
" 11  11 "
" 11     "
" 11     "
" 11     "
"        ",

// s
"        "
"        "
"  11111 "
" 11     "
"  1111  "
"     11 "
" 11111  "
"        ",

// t
"        "
"   11   "
" 111111 "
"   11   "
"   11   "
"   11   "
"    111 "
"        ",

// u
"        "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// v
"        "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"        ",

// w
"        "
"        "
"11   11 "
"11   11 "
"11 1 11 "
" 11111  "
" 11 11  "
"        ",

// x
"        "
"        "
" 11  11 "
"  1111  "
"   11   "
"  1111  "
" 11  11 "
"        ",

// y
"        "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"     11 "
" 11111  ",

// z
"        "
"        "
" 111111 "
"    11  "
"   11   "
"  11    "
" 111111 "
"        ",

// {
"    111 "
"   11   "
"   11   "
"  11    "
"   11   "
"   11   "
"    111 "
"        ",

// |
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   ",

// }
" 111    "
"   11   "
"   11   "
"    11  "
"   11   "
"   11   "
" 111    "
"        ",

// ~
"        "
" 11     "
"1111  1 "
"1  1111 "
"    11  "
"        "
"        "
"        ",

// (127)
"        "
"   11   "
"   11   "
"  11 1  "
"  11 1  "
" 11   1 "
" 111111 "
"        ",

// (128)
"        "
"  1111  "
" 11  11 "
" 11     "
" 11  11 "
"  1111  "
"    1   "
"  111   ",

// (129)
" 11  11 "
"        "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// (130)
"    11  "
"   11   "
"        "
"  1111  "
" 111111 "
" 11     "
"  1111  "
"        ",

// (131)
"   11   "
" 11  11 "
"        "
"  1111  "
"     11 "
" 111111 "
"  11111 "
"        ",

// (132)
" 11  11 "
"        "
"  1111  "
"     11 "
"  11111 "
" 11  11 "
"  11111 "
"        ",

// (133)
"  11    "
"   11   "
"        "
"  1111  "
"     11 "
" 111111 "
"  11111 "
"        ",

// (134)
"   11   "
"   11   "
"        "
"  1111  "
"     11 "
" 111111 "
"  11111 "
"        ",

// (135)
"        "
"        "
"  1111  "
" 11     "
" 11     "
"  1111  "
"    1   "
"   11   ",

// (136)
"   11   "
" 11  11 "
"        "
"  1111  "
" 111111 "
" 11     "
"  1111  "
"        ",

// (137)
" 11  11 "
"        "
"  1111  "
" 11  11 "
" 111111 "
" 11     "
"  1111  "
"        ",

// (138)
"  11    "
"   11   "
"        "
"  1111  "
" 111111 "
" 11     "
"  1111  "
"        ",

// (139)
" 11  11 "
"        "
"        "
"  111   "
"   11   "
"   11   "
"  1111  "
"        ",

// (140)
"   11   "
" 11  11 "
"        "
"  111   "
"   11   "
"   11   "
"  1111  "
"        ",

// (141)
" 11     "
"  11    "
"        "
"  111   "
"   11   "
"   11   "
"  1111  "
"        ",

// (142)
" 11  11 "
"        "
"   11   "
"  1111  "
" 11  11 "
" 111111 "
" 11  11 "
"        ",

// (143)
"   11   "
"        "
"   11   "
"  1111  "
" 11  11 "
" 111111 "
" 11  11 "
"        ",

// (144)
"    11  "
"   11   "
" 111111 "
" 11     "
" 11111  "
" 11     "
" 111111 "
"        ",

// (145)
"        "
"        "
" 111111 "
"   11 11"
" 1111111"
"11 11   "
" 111111 "
"        ",

// (146)
"  111111"
" 1111   "
"11 11   "
"11 1111 "
"11111   "
"11 11   "
"11 11111"
"        ",

// (147)
"   11   "
" 11  11 "
"        "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (148)
" 11  11 "
"        "
"        "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (149)
"  11    "
"   11   "
"        "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (150)
"   11   "
" 11  11 "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// (151)
"  11    "
"   11   "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// (152)
" 11  11 "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"     11 "
" 11111  ",

// (153)
" 11  11 "
"        "
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (154)
" 11  11 "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// (155)
"   11   "
"   11   "
"  1111  "
" 11     "
" 11     "
"  1111  "
"   11   "
"   11   ",

// (156)
"   111  "
"  111 1 "
"  11    "
" 11111  "
"  11    "
"  11    "
" 111111 "
"        ",

// (157)
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"  1111  "
"   11   "
"   11   "
"        ",

// (158)
"   111  "
"  11 11 "
" 11  11 "
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
" 11     ",

// (159)
"   1111 "
"  11    "
" 11111  "
"  11    "
"  11    "
"  11    "
" 11     "
"        ",

// (160)
"    11  "
"   11   "
"        "
"  1111  "
"     11 "
" 111111 "
"  11111 "
"        ",

// (161)
"    11  "
"   11   "
"        "
"  111   "
"   11   "
"   11   "
"  1111  "
"        ",

// (162)
"    11  "
"   11   "
"        "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (163)
"    11  "
"   11   "
"        "
" 11  11 "
" 11  11 "
" 11  11 "
"  11111 "
"        ",

// (164)
"  11 1  "
" 1 11   "
"        "
" 11111  "
" 11  11 "
" 11  11 "
" 11  11 "
"        ",

// (165)
"  11 1  "
" 1 11   "
"        "
" 11  11 "
" 111 11 "
" 11 111 "
" 11  11 "
"        ",

// (166)
"        "
"  1111  "
"     11 "
"  11111 "
" 11  11 "
"  11111 "
"        "
"  1111  ",

// (167)
"        "
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  "
"        "
"  1111  ",

// (168)
"        "
"   11   "
"        "
"   11   "
"  11    "
" 11     "
" 11  11 "
"  1111  ",

// (169)
"        "
"        "
"        "
"  11111 "
"  11    "
"  11    "
"  11    "
"        ",

// (170)
"        "
"        "
"        "
" 11111  "
"    11  "
"    11  "
"    11  "
"        ",

// (171)
"11   11 "
"11  11  "
"11 11   "
"  11 11 "
" 11 1 11"
"11    11"
"1    11 "
"    1111",

// (172)
"11   11 "
"11  11  "
"11 11   "
"  11 11 "
" 11 111 "
"11 1 11 "
"1  11111"
"     11 ",

// (173)
"        "
"   11   "
"        "
"   11   "
"   11   "
"   11   "
"   11   "
"   11   ",

// (174)
"   11 11"
"  11 11 "
" 11 11  "
"11 11   "
" 11 11  "
"  11 11 "
"   11 11"
"        ",

// (175)
"11 11   "
" 11 11  "
"  11 11 "
"   11 11"
"  11 11 "
" 11 11  "
"11 11   "
"        ",

// (176)
"  11 1  "
" 1 11   "
"        "
"  1111  "
"     11 "
" 111111 "
"  11111 "
"        ",

// (177)
"  11 1  "
" 1 11   "
"        "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (178)
"      1 "
"  1111  "
" 11  11 "
" 11 111 "
" 111 11 "
" 11  11 "
"  1111  "
" 1      ",

// (179)
"        "
"      1 "
"  1111  "
" 11 111 "
" 111 11 "
" 11  11 "
"  1111  "
" 1      ",

// (180)
"        "
"        "
" 111111 "
"11 11 11"
"11 11111"
"11 11   "
" 111111 "
"        ",

// (181)
" 1111111"
"11 11   "
"11 11   "
"11 1111 "
"11 11   "
"11 11   "
" 1111111"
"        ",

// (182)
"  11    "
"   11   "
"        "
"   11   "
"  1111  "
" 11  11 "
" 111111 "
" 11  11 ",

// (183)
"  11 1  "
" 1 11   "
"        "
"   11   "
"  1111  "
" 11  11 "
" 111111 "
" 11  11 ",

// (184)
"  11 1  "
" 1 11   "
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"  1111  ",

// (185)
" 11  11 "
"        "
"        "
"        "
"        "
"        "
"        "
"        ",

// (186)
"    11  "
"   11   "
"  11    "
"        "
"        "
"        "
"        "
"        ",

// (187)
"        "
"   1    "
"  111   "
"   1    "
"   1    "
"   1    "
"        "
"        ",

// (188)
" 1111 1 "
"11  1 1 "
"11  1 1 "
"11  1 1 "
" 1111 1 "
"    1 1 "
"    1 1 "
"    1 1 ",

// (189)
" 111111 "
"11    11"
"1 1111 1"
"1 11   1"
"1 11   1"
"1 1111 1"
"11    11"
" 111111 ",

// (190)
" 111111 "
"11    11"
"1 1111 1"
"1 1  1 1"
"1 111  1"
"1 1 11 1"
"11    11"
" 111111 ",

// (191)
"1111   1"
" 1 11 11"
" 1 11111"
" 1 1 1 1"
" 1 1   1"
"        "
"        "
"        ",

// (192)
" 11  11 "
"        "
"111  11 "
" 11  11 "
" 11  11 "
"1111 11 "
"     11 "
"   111  ",

// (193)
"1111 11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"1111 11 "
"     11 "
"   111  ",

// (194)
"        "
" 11  11 "
" 111 11 "
"  1111  "
" 11 111 "
" 11  11 "
"        "
"        ",

// (195)
"        "
" 11111  "
"    11  "
"    11  "
"    11  "
" 111111 "
"        "
"        ",

// (196)
"        "
"   1111 "
"     11 "
"    111 "
"   1111 "
"  11 11 "
"        "
"        ",

// (197)
"        "
" 111111 "
"    11  "
"    11  "
"    11  "
"    11  "
"        "
"        ",

// (198)
"        "
" 11111  "
"     11 "
" 11  11 "
" 11  11 "
" 11  11 "
"        "
"        ",

// (199)
"        "
"   111  "
"    11  "
"    11  "
"    11  "
"    11  "
"        "
"        ",

// (200)
"        "
"   1111 "
"    11  "
"     11 "
"     11 "
"     11 "
"        "
"        ",

// (201)
"        "
" 111111 "
"  11 11 "
"  11 11 "
"  11 11 "
"  11 11 "
"        "
"        ",

// (202)
" 11     "
" 11 111 "
" 11  11 "
" 11  11 "
" 11  11 "
" 111111 "
"        "
"        ",

// (203)
"        "
"  1111  "
"    11  "
"    11  "
"        "
"        "
"        "
"        ",

// (204)
"        "
"  11111 "
"     11 "
"     11 "
"     11 "
"  11111 "
"        "
"        ",

// (205)
" 11     "
" 111111 "
"     11 "
"     11 "
"     11 "
"    111 "
"        "
"        ",

// (206)
"        "
" 11 11  "
"  11111 "
" 11  11 "
" 11  11 "
" 11 111 "
"        "
"        ",

// (207)
"        "
"   111  "
"    11  "
"    11  "
"    11  "
"  1111  "
"        "
"        ",

// (208)
"        "
"  11111 "
"  11 11 "
"  11 11 "
"  11 11 "
"   111  "
"        "
"        ",

// (209)
"        "
"  11 11 "
"  11 11 "
"  11 11 "
"  11 11 "
" 111111 "
"        "
"        ",

// (210)
"        "
" 111111 "
" 11  11 "
" 111 11 "
"     11 "
" 111111 "
"        "
"        ",

// (211)
"        "
" 11  11 "
" 11  11 "
"  1111  "
"    111 "
" 111111 "
"        "
"        ",

// (212)
"        "
"  11111 "
"     11 "
"  11 11 "
"  11 11 "
"  11 1  "
"  11    "
"        ",

// (213)
"        "
" 1111   "
"    11  "
"    11  "
"    11  "
"    11  "
"        "
"        ",

// (214)
"        "
"11 1 11 "
"11 1 11 "
"11 1 11 "
"11 1 11 "
"1111111 "
"        "
"        ",

// (215)
"        "
" 11111  "
" 11 11  "
" 11 11  "
" 11 11  "
"111 11  "
"        "
"        ",

// (216)
"        "
"   111  "
"    11  "
"    11  "
"    11  "
"    11  "
"    11  "
"        ",

// (217)
"        "
"  11111 "
"     11 "
"     11 "
"     11 "
"     11 "
"     11 "
"        ",

// (218)
"        "
"1111111 "
" 11  11 "
" 11  11 "
" 11  11 "
" 111111 "
"        "
"        ",

// (219)
"        "
" 111111 "
" 11  11 "
" 111 11 "
"     11 "
"     11 "
"     11 "
"        ",

// (220)
"        "
"  11 11 "
"  11 11 "
"   111  "
"    11  "
"    11  "
"    11  "
"        ",

// (221)
"    111 "
"   11 11"
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"11 11   "
" 111    ",

// (222)
"        "
"   1    "
"  111   "
" 11 11  "
"11   11 "
"1     1 "
"        "
"        ",

// (223)
" 11  11 "
"1111 111"
"1  11  1"
"1  11  1"
"111 1111"
" 11  11 "
"        "
"        ",

// (224)
"        "
"        "
" 111 11 "
"11 111  "
"11  1   "
"11 111  "
" 111 11 "
"        ",

// (225)
"   111  "
"  11 11 "
" 11  11 "
" 11111  "
" 11  11 "
" 11  11 "
" 11111  "
" 11     ",

// (226)
"        "
"1111111 "
" 11  11 "
" 11   1 "
" 11     "
" 11     "
" 11     "
"11111   ",

// (227)
"        "
"        "
"1111111 "
" 11 11  "
" 11 11  "
" 11 11  "
" 11 11  "
" 1  1   ",

// (228)
"1111111 "
" 11  11 "
"  11    "
"   11   "
"  11    "
" 11  11 "
"1111111 "
"        ",

// (229)
"        "
"   1111 "
"  111   "
" 11 11  "
" 11 11  "
" 11 11  "
"  111   "
"        ",

// (230)
"        "
"        "
" 11 11  "
" 11 11  "
" 11 11  "
" 11 11  "
" 1111111"
"11      ",

// (231)
"        "
"        "
" 111111 "
"   11   "
"   11   "
"   11   "
"   11   "
"   1    ",

// (232)
"  1111  "
"   11   "
"  1111  "
" 11  11 "
" 11  11 "
"  1111  "
"   11   "
"  1111  ",

// (233)
"        "
"  1111  "
" 11  11 "
" 111111 "
" 11  11 "
" 11  11 "
"  1111  "
"        ",

// (234)
"        "
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
"  1  1  "
" 11  11 "
"        ",

// (235)
"   111  "
"  11 11 "
" 1111   "
"11 111  "
"11  11  "
"111 11  "
" 1111   "
"        ",

// (236)
"    11  "
"   11   "
"  111   "
" 1 1 1  "
" 1 1 1  "
"  111   "
"  11    "
" 11     ",

// (237)
"        "
"   1    "
" 11111  "
"11 1 11 "
"11 1 11 "
"11 1 11 "
" 11111  "
"   1    ",

// (238)
"  11111 "
" 111    "
" 11     "
" 111111 "
" 11     "
" 111    "
"  11111 "
"        ",

// (239)
"  1111  "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
" 11  11 "
"        ",

// (240)
"        "
" 111111 "
"        "
" 111111 "
"        "
" 111111 "
"        "
"        ",

// (241)
"   11   "
"   11   "
" 111111 "
"   11   "
"   11   "
"        "
" 111111 "
"        ",

// (242)
"  11    "
"   11   "
"    11  "
"   11   "
"  11    "
"        "
" 111111 "
"        ",

// (243)
"    11  "
"   11   "
"  11    "
"   11   "
"    11  "
"        "
" 111111 "
"        ",

// (244)
"        "
"    111 "
"   11 11"
"   11 11"
"   11   "
"   11   "
"   11   "
"   11   ",

// (245)
"   11   "
"   11   "
"   11   "
"   11   "
"11 11   "
"11 11   "
" 111    "
"        ",

// (246)
"   11   "
"   11   "
"        "
" 111111 "
"        "
"   11   "
"   11   "
"        ",

// (247)
"        "
"  11  1 "
" 1  11  "
"        "
"  11  1 "
" 1  11  "
"        "
"        ",

// (248)
"  111   "
" 11 11  "
"  111   "
"        "
"        "
"        "
"        "
"        ",

// (249)
"  111   "
" 11111  "
"  111   "
"        "
"        "
"        "
"        "
"        ",

// (250)
"        "
"        "
"        "
"        "
"   11   "
"   11   "
"        "
"        ",

// (251)
"        "
"        "
"    1111"
"   11   "
"11 11   "
" 111    "
"  11    "
"        ",

// (252)
"  111   "
" 11 11  "
" 11 11  "
" 11 11  "
" 11 11  "
"        "
"        "
"        ",

// (253)
"  111   "
" 11 11  "
"   11   "
"  11    "
" 11111  "
"        "
"        "
"        ",

// (254)
" 1111   "
"    11  "
"  111   "
"    11  "
" 1111   "
"        "
"        "
"        ",

// (255)
"1111111 "
"1111111 "
"1111111 "
"1111111 "
"1111111 "
"1111111 "
"1111111 "
"        "
};

Text::Text(Program &program) : program(std::move(program)) {
    loadPixelBitmaps();
}

Text::Text(const std::string &vertex_shader_filename, const std::string &fragment_shader_filename) : program(vertex_shader_filename, fragment_shader_filename) {
    loadPixelBitmaps();

    std::array<Vertex, 4> vertices = {
        Vertex(Vec3F(0.0f, 0.0f, 0.0f), Vec2F(0,1)),
        Vertex(Vec3F(1.0f, 0.0f, 0.0f), Vec2F(1,1)),
        Vertex(Vec3F(1.0f, 1.0f, 0.0f), Vec2F(1,0)),
        Vertex(Vec3F(0.0f, 1.0f, 0.0f), Vec2F(0,0)),
    };

    GLuint indices[] = {
        0, 1, 3,
        1, 2, 3
    };

    glGenVertexArrays(1, &VAO);
    glGenBuffers(1, &VBO);
    glGenBuffers(1, &EBO);

    glBindVertexArray(VAO);

    glBindBuffer(GL_ARRAY_BUFFER, VBO);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertex) * vertices.size(), vertices.data(), GL_STATIC_DRAW);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, EBO);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(indices), indices, GL_STATIC_DRAW);

    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*)0);
    glEnableVertexAttribArray(0);
    glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid*)24);
    glEnableVertexAttribArray(1);

}

Text::Text(const std::string &shader_filename) : program(shader_filename) {
    loadPixelBitmaps();
}



GLuint Text::CreateTexture(std::array<char, 256> pixels) {
    GLuint texture;

    glGenTextures(1, &texture);
    glBindTexture(GL_TEXTURE_2D, texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 8, 8, 0, GL_RGBA, GL_UNSIGNED_BYTE, pixels.data());

    return texture;

}

void Text::loadPixelBitmaps() {
    std::array<char, 256> nul{0};
    for (int i = 0, z = 0; i < 64; i++, z+=4) {
        auto pixel = nulpixelbitmap[i] != ' ' ? 255 : 0;
        nul[z+0] = pixel;
        nul[z+1] = pixel;
        nul[z+2] = pixel;
        nul[z+3] = pixel;
    }
    nulTexture = CreateTexture(nul);

    std::array<char, 256> block{0};
    for (int i = 0, z = 0; i < 64; i++, z+=4) {
        auto pixel = blockpixelbitmap[i] != ' ' ? 255 : 0;
        block[z+0] = pixel;
        block[z+1] = pixel;
        block[z+2] = pixel;
        block[z+3] = pixel;
    }

    blockTexture = CreateTexture(block);

    for (uint32_t i = 0; i < fontTextures.size(); i++) {
        std::array<char, 256> chr{0};
        auto pixelbitmap = pixelbitmaps[i];
        if (pixelbitmap) {
            for (int i = 0, z = 0; i < 64; i++, z+=4) {
                auto pixel = pixelbitmap[i] != ' ' ? 255 : 0;
                chr[z+0] = pixel;
                chr[z+1] = pixel;
                chr[z+2] = pixel;
                chr[z+3] = pixel;
            }

            fontTextures[i] = CreateTexture(chr);
        } else {
            fontTextures[i] = nulTexture;
        }
    }
}

void Text::draw(const std::string &str, const Common::Colour &colour, const MatrixF &screen) {
    glEnable(GL_BLEND);

    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    uint16_t offset = 0;

    glEnable(GL_TEXTURE_2D);

    program.use();
    glBindVertexArray(VAO);

    glEnableVertexAttribArray(0);
    glEnableVertexAttribArray(1);

    for (const auto c : str) {
        GLuint fontTexture = fontTextures[(uint8_t)c];

        MatrixF transform = MatrixF::Translation((float)offset, 0, 0) * screen;

        program("transform", transform);
        program("textColour", colour);
        program("charTexture", 0);

        glActiveTexture(GL_TEXTURE0);
        glBindTexture(GL_TEXTURE_2D, fontTexture);

        glDrawElements(GL_TRIANGLES, 6, GL_UNSIGNED_INT, 0);

        offset++;
    }
    glDisable(GL_BLEND);
    glDisable(GL_TEXTURE_2D);

    glDisableVertexAttribArray(0);
    glDisableVertexAttribArray(1);
}


Text::~Text() {
    for (uint32_t i = 0; i < fontTextures.size(); i++) {
        auto fontTexture = fontTextures[i];
        glDeleteTextures(1, &fontTexture);
    }

    glDeleteVertexArrays(1, &VAO);
    glDeleteBuffers(1, &VBO);
    glDeleteBuffers(1, &EBO);
}
